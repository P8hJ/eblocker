(function(){function t(){var a=new XMLHttpRequest;a.onload=function(){JSON.parse(a.response)||(k("@EBLOCKER_CONTROL_BAR_URL@/advice/#!/reminder/@EBLOCKER_PAGE_CONTEXT_ID@"),d=!0)};a.onerror=function(a){console.error("Cannot load device restrictions ",a)};a.open("GET","@EBLOCKER_CONTROL_BAR_URL@/controlbar/deviceRestrictions");a.setRequestHeader("Accept","application/json");a.send()}function p(a){l=a;f?g(a):k("@EBLOCKER_CONTROL_BAR_URL@/controlbar/index.html#!/@EBLOCKER_PAGE_CONTEXT_ID@")}function k(a){f=
d=!0;void 0!==h&&clearTimeout(h);document.getElementById("eblocker-overlay").style.display="block";document.getElementById("eblocker-badge").style.display="none";document.getElementById("eblocker-message-badge").style.display="none";document.getElementById("eblocker-warning").style.display="none";document.getElementById("eblocker-icon-left").style.zIndex=2147483637;document.getElementById("eblocker-icon-right").style.zIndex=2147483637;var b=document.createElement("iframe");b.setAttribute("id","eblocker-overlay-iframe");
b.setAttribute("src",a);b.setAttribute("style","border:0px; width:100%; height:100%; overflow:hidden; background-color:#ffffff00;");b.setAttribute("scrolling","no");document.getElementById("eblocker-overlay-container").appendChild(b)}function g(a){var b=new XMLHttpRequest;b.open("POST","@EBLOCKER_CONTROL_BAR_URL@/api/device/iconpos/"+("eblocker-icon-left"===a?"LEFT":"RIGHT"),!0);b.send();d=!1;document.getElementById("eblocker-overlay").style.display="none";f=!1;b=document.getElementById("eblocker-badge");
b.style.display="0"===b.innerHTML?"none":"block";b.className="eblocker-semitransparent eblocker-base-badge eblocker-base-badge-background";document.getElementById("eblocker-message-badge").style.display=""===document.getElementById("eblocker-message-badge").innerHTML?"none":"block";document.getElementById("eblocker-warning").style.display="@EBLOCKER_WARNING@";document.getElementById(a).style.display="block";document.getElementById("eblocker-icon-left"===a?"eblocker-icon-right":"eblocker-icon-left").style.display=
"none";document.getElementById("eblocker-icon-left").style.zIndex=2147483647;document.getElementById("eblocker-icon-right").style.zIndex=2147483647;var b=document.getElementById("eblocker-badge"),c=document.getElementById("eblocker-message-badge"),e=document.getElementById("eblocker-warning");e.style.display="@EBLOCKER_WARNING@";"eblocker-icon-left"===a?(b.style.left="32px",b.style.right="",c.style.left="32px",c.style.right="",e.style.left="53px",e.style.right=""):(b.style.right="32px",b.style.left=
"auto",c.style.right="32px",c.style.left="auto",e.style.right="53px",e.style.left="auto");a=document.getElementById("eblocker-overlay-iframe");null!==a&&document.getElementById("eblocker-overlay-container").removeChild(a);!0===q&&(h=window.setTimeout(m,"@EBLOCKER_HIDE_ICON_AFTER_SECONDS@"))}function m(){f||(document.getElementById("eblocker-html").style.display="none",window.clearInterval(r))}if(this!==top)m();else{var f=!1,n=0,h,r=window.setInterval(function(){if(!1===d){var a=document.getElementById("eblocker-badge"),
b=new XMLHttpRequest;b.onload=function(){var c=JSON.parse(b.response).badge;c!=n&&(n=c,a.style.display="inline",a.innerHTML=n)};b.onerror=function(a){console.error("Could not update badge ",a);window.clearInterval(r)};b.open("GET","@EBLOCKER_CONTROL_BAR_URL@/filter/badge/@EBLOCKER_PAGE_CONTEXT_ID@",!0);b.setRequestHeader("Accept","application/json");b.send()}},2E3),d=!1,l="@EBLOCKER_ICON_POSITION@",q="true"==="@EBLOCKER_HIDE_ICON_ENABLED@".toString(),u="true"==="@EBLOCKER_REMINDER_ENABLED@".toString();
"true"==="@EBLOCKER_WELCOME_ENABLED@".toString()===!0&&k("@EBLOCKER_CONTROL_BAR_URL@/advice/#!/welcome/@EBLOCKER_PAGE_CONTEXT_ID@");!0===q&&(h=window.setTimeout(m,"@EBLOCKER_HIDE_ICON_AFTER_SECONDS@"));!0===u&&t();(function(){var a=new XMLHttpRequest;a.open("POST","@EBLOCKER_CONTROL_BAR_URL@/pagecontext/@EBLOCKER_PAGE_CONTEXT_ID@/top",!0);a.send()})();(function(){if(!1===d){var a=document.getElementById("eblocker-message-badge"),b=new XMLHttpRequest;b.onload=function(){var c=JSON.parse(b.response);
""!==c.msg?(a.style.display="inline",a.innerHTML=c.msg):(a.style.display="none",a.innerHTML="")};b.onerror=function(a){console.error("Could not update message badge ",a)};b.open("GET","@EBLOCKER_CONTROL_BAR_URL@/api/icon/state",!0);b.setRequestHeader("Accept","application/json");b.send()}})();window.addEventListener("message",function(a){"close-eblocker-overlay"===a.data.type?g(l):"close-eblocker-overlay-right"===a.data.type?g("eblocker-icon-right"):"close-eblocker-overlay-left"===a.data.type&&g("eblocker-icon-left")},
!1);document.getElementById(l).style.display="block";document.getElementById("eblocker-icon-left").addEventListener("click",function(){p("eblocker-icon-left")},!1);document.getElementById("eblocker-icon-right").addEventListener("click",function(){p("eblocker-icon-right")},!1)}})();